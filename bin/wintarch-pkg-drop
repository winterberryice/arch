#!/bin/bash
# Remove package(s) safely (no error if not installed)
# Usage: wintarch-pkg-drop <package> [package...]

set -e

WINTARCH_PATH="${WINTARCH_PATH:-/opt/wintarch}"
source "$WINTARCH_PATH/bin/lib/helpers.sh"

if [[ $# -eq 0 ]]; then
    echo "Usage: wintarch-pkg-drop <package> [package...]" >&2
    exit 1
fi

for pkg in "$@"; do
    if pacman -Q "$pkg" &>/dev/null; then
        sudo pacman -Rns --noconfirm "$pkg"
    fi
done
